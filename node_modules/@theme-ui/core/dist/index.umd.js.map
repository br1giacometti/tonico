{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  jsx as emotionJsx,\n  ThemeContext as EmotionContext,\n} from '@emotion/react'\nimport { Theme } from '@theme-ui/css'\nimport * as React from 'react'\nimport deepmerge from 'deepmerge'\nimport packageInfo from '@emotion/react/package.json'\nimport parseProps from '@theme-ui/parse-props'\n\nimport { ThemeUIJSX } from './jsx-namespace'\nexport type { ThemeUIJSX } from './jsx-namespace'\n\nexport type {\n  CSSObject,\n  CSSOthersObject,\n  CSSProperties,\n  CSSPseudoSelectorProps,\n  ColorMode,\n  ColorModesScale,\n  Label,\n  ResponsiveStyleValue,\n  Scale,\n  StylePropertyValue,\n  TLengthStyledSystem,\n  Theme,\n  ThemeDerivedStyles,\n  ThemeStyles,\n  ThemeUICSSObject,\n  ThemeUICSSProperties,\n  ThemeUIExtendedCSSProperties,\n  ThemeUIStyleObject,\n  VariantProperty,\n} from '@theme-ui/css'\n\nexport { __internalGetUseRootStyles } from '@theme-ui/css'\nexport * from './types'\n\nconst __EMOTION_VERSION__ = packageInfo.version\n\nexport const jsx: typeof React.createElement = <P extends {}>(\n  type: React.FunctionComponent<P> | React.ComponentClass<P> | string,\n  props: React.Attributes & P,\n  ...children: React.ReactNode[]\n): any => emotionJsx(type, parseProps(props), ...children)\n\n/**\n * @internal for Babel JSX pragma\n * @see https://github.com/system-ui/theme-ui/issues/1603\n */\nexport const createElement: unknown = jsx\n\nexport declare namespace jsx {\n  export namespace JSX {\n    export interface Element extends ThemeUIJSX.Element {}\n    export interface ElementClass extends ThemeUIJSX.ElementClass {}\n    export interface ElementAttributesProperty\n      extends ThemeUIJSX.ElementAttributesProperty {}\n    export interface ElementChildrenAttribute\n      extends ThemeUIJSX.ElementChildrenAttribute {}\n    export type LibraryManagedAttributes<\n      C,\n      P\n    > = ThemeUIJSX.LibraryManagedAttributes<C, P>\n    export interface IntrinsicAttributes\n      extends ThemeUIJSX.IntrinsicAttributes {}\n    export interface IntrinsicClassAttributes<T>\n      extends ThemeUIJSX.IntrinsicClassAttributes<T> {}\n    export type IntrinsicElements = ThemeUIJSX.IntrinsicElements\n  }\n}\n\nexport interface ThemeUIContextValue {\n  __EMOTION_VERSION__: string\n  theme: Theme\n}\n\n/**\n * @internal\n */\nexport const __ThemeUIContext = React.createContext<ThemeUIContextValue>({\n  __EMOTION_VERSION__,\n  theme: {},\n})\n\nexport const useThemeUI = () => React.useContext(__ThemeUIContext)\n\nconst canUseSymbol = typeof Symbol === 'function' && Symbol.for\n\nconst REACT_ELEMENT = canUseSymbol ? Symbol.for('react.element') : 0xeac7\nconst FORWARD_REF = canUseSymbol ? Symbol.for('react.forward_ref') : 0xeac7\n\nconst deepmergeOptions: deepmerge.Options = {\n  isMergeableObject: (n) => {\n    return (\n      !!n &&\n      typeof n === 'object' &&\n      (n as React.ExoticComponent).$$typeof !== REACT_ELEMENT &&\n      (n as React.ExoticComponent).$$typeof !== FORWARD_REF\n    )\n  },\n  arrayMerge: (_leftArray, rightArray) => rightArray,\n}\n\n/**\n * Deeply merge themes\n */\nexport const merge = (a: Theme, b: Theme): Theme =>\n  deepmerge(a, b, deepmergeOptions)\n\nfunction mergeAll<A, B>(a: A, B: B): A & B\nfunction mergeAll<A, B, C>(a: A, B: B, c: C): A & B & C\nfunction mergeAll<A, B, C, D>(a: A, B: B, c: C, d: D): A & B & C & D\nfunction mergeAll<T = Theme>(...args: Partial<T>[]) {\n  return deepmerge.all<T>(args, deepmergeOptions)\n}\n\nmerge.all = mergeAll\n\nexport interface __ThemeUIInternalBaseThemeProviderProps {\n  context: ThemeUIContextValue\n}\n/**\n * @internal\n */\nexport const __ThemeUIInternalBaseThemeProvider: React.FC<__ThemeUIInternalBaseThemeProviderProps> = ({\n  context,\n  children,\n}) =>\n  jsx(\n    EmotionContext.Provider,\n    { value: context.theme },\n    jsx(__ThemeUIContext.Provider, {\n      value: context,\n      children,\n    })\n  )\n\nexport interface ThemeProviderProps {\n  theme: Theme | ((outerTheme: Theme) => Theme)\n  children?: React.ReactNode\n}\n\nexport function ThemeProvider({ theme, children }: ThemeProviderProps) {\n  const outer = useThemeUI()\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (outer.__EMOTION_VERSION__ !== __EMOTION_VERSION__) {\n      console.warn(\n        'Multiple versions of Emotion detected,',\n        'and theming might not work as expected.',\n        'Please ensure there is only one copy of @emotion/react installed in your application.'\n      )\n    }\n  }\n\n  const context =\n    typeof theme === 'function'\n      ? { ...outer, theme: theme(outer.theme) }\n      : merge.all({}, outer, { theme })\n\n  return jsx(__ThemeUIInternalBaseThemeProvider, { context }, children)\n}\n"],"names":["__EMOTION_VERSION__","packageInfo","version","jsx","type","props","emotionJsx","parseProps","createElement","__ThemeUIContext","React","theme","useThemeUI","canUseSymbol","Symbol","REACT_ELEMENT","FORWARD_REF","deepmergeOptions","isMergeableObject","n","$$typeof","arrayMerge","_leftArray","rightArray","merge","a","b","deepmerge","mergeAll","all","__ThemeUIInternalBaseThemeProvider","context","children","EmotionContext","Provider","value","ThemeProvider","outer","process","env","NODE_ENV","console","warn"],"mappings":"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"}