{"ast":null,"code":"import { useContext } from 'react';\nimport { Context } from '../Context';\nexport function useAddItemsToCart() {\n  const {\n    client,\n    cart,\n    setCart\n  } = useContext(Context);\n\n  async function addItemsToCart(items) {\n    if (cart == null || client == null) {\n      throw new Error('Called addItemsToCart too soon');\n    }\n\n    if (items.length < 1) {\n      throw new Error('Must include at least one line item, empty line items found');\n    }\n\n    items.forEach(item => {\n      if (item.variantId == null) {\n        throw new Error(`Missing variantId in item`);\n      }\n\n      if (item.quantity == null) {\n        throw new Error(`Missing quantity in item with variant id: ${item.variantId}`);\n      } else if (typeof item.quantity != 'number') {\n        throw new Error(`Quantity is not a number in item with variant id: ${item.variantId}`);\n      } else if (item.quantity < 1) {\n        throw new Error(`Quantity must not be less than one in item with variant id: ${item.variantId}`);\n      }\n    });\n    const newCart = await client.checkout.addLineItems(cart.id, // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    items);\n    setCart(newCart);\n  }\n\n  return addItemsToCart;\n}","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/lib/shopify/storefront-data-hooks/src/hooks/useAddItemsToCart.ts"],"names":["useContext","Context","useAddItemsToCart","client","cart","setCart","addItemsToCart","items","Error","length","forEach","item","variantId","quantity","newCart","checkout","addLineItems","id"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,OAAT,QAAwB,YAAxB;AAIA,OAAO,SAASC,iBAAT,GAA6B;AAClC,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,IAAV;AAAgBC,IAAAA;AAAhB,MAA4BL,UAAU,CAACC,OAAD,CAA5C;;AAEA,iBAAeK,cAAf,CAA8BC,KAA9B,EAAsD;AACpD,QAAIH,IAAI,IAAI,IAAR,IAAgBD,MAAM,IAAI,IAA9B,EAAoC;AAClC,YAAM,IAAIK,KAAJ,CAAU,gCAAV,CAAN;AACD;;AAED,QAAID,KAAK,CAACE,MAAN,GAAe,CAAnB,EAAsB;AACpB,YAAM,IAAID,KAAJ,CACJ,6DADI,CAAN;AAGD;;AAEDD,IAAAA,KAAK,CAACG,OAAN,CAAeC,IAAD,IAAU;AACtB,UAAIA,IAAI,CAACC,SAAL,IAAkB,IAAtB,EAA4B;AAC1B,cAAM,IAAIJ,KAAJ,CAAW,2BAAX,CAAN;AACD;;AAED,UAAIG,IAAI,CAACE,QAAL,IAAiB,IAArB,EAA2B;AACzB,cAAM,IAAIL,KAAJ,CACH,6CAA4CG,IAAI,CAACC,SAAU,EADxD,CAAN;AAGD,OAJD,MAIO,IAAI,OAAOD,IAAI,CAACE,QAAZ,IAAwB,QAA5B,EAAsC;AAC3C,cAAM,IAAIL,KAAJ,CACH,qDAAoDG,IAAI,CAACC,SAAU,EADhE,CAAN;AAGD,OAJM,MAIA,IAAID,IAAI,CAACE,QAAL,GAAgB,CAApB,EAAuB;AAC5B,cAAM,IAAIL,KAAJ,CACH,+DAA8DG,IAAI,CAACC,SAAU,EAD1E,CAAN;AAGD;AACF,KAlBD;AAoBA,UAAME,OAAO,GAAG,MAAMX,MAAM,CAACY,QAAP,CAAgBC,YAAhB,CACpBZ,IAAI,CAACa,EADe,EAEpB;AACA;AACAV,IAAAA,KAJoB,CAAtB;AAMAF,IAAAA,OAAO,CAACS,OAAD,CAAP;AACD;;AAED,SAAOR,cAAP;AACD","sourcesContent":["import { useContext } from 'react'\nimport { Context } from '../Context'\nimport ShopifyBuy from 'shopify-buy'\nimport { LineItemPatch } from '../types'\n\nexport function useAddItemsToCart() {\n  const { client, cart, setCart } = useContext(Context)\n\n  async function addItemsToCart(items: LineItemPatch[]) {\n    if (cart == null || client == null) {\n      throw new Error('Called addItemsToCart too soon')\n    }\n\n    if (items.length < 1) {\n      throw new Error(\n        'Must include at least one line item, empty line items found'\n      )\n    }\n\n    items.forEach((item) => {\n      if (item.variantId == null) {\n        throw new Error(`Missing variantId in item`)\n      }\n\n      if (item.quantity == null) {\n        throw new Error(\n          `Missing quantity in item with variant id: ${item.variantId}`\n        )\n      } else if (typeof item.quantity != 'number') {\n        throw new Error(\n          `Quantity is not a number in item with variant id: ${item.variantId}`\n        )\n      } else if (item.quantity < 1) {\n        throw new Error(\n          `Quantity must not be less than one in item with variant id: ${item.variantId}`\n        )\n      }\n    })\n\n    const newCart = await client.checkout.addLineItems(\n      cart.id,\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      items as ShopifyBuy.LineItem[]\n    )\n    setCart(newCart)\n  }\n\n  return addItemsToCart\n}\n"]},"metadata":{},"sourceType":"module"}