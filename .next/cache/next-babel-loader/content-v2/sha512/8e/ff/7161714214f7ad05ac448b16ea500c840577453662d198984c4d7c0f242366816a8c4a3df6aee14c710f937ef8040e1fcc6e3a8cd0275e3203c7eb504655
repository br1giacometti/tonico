{"ast":null,"code":"import _defineProperty from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Bruno\\\\Desktop\\\\tienda\\\\nextjs-shopify-master\\\\blocks\\\\ProductGrid\\\\ProductGrid.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\nimport { jsx } from 'theme-ui';\nimport { useEffect, useState } from 'react';\nimport { LoadingDots } from '@components/ui';\nimport { Grid } from '@theme-ui/components';\nimport { ProductCardDemo, ProductCard } from '@components/common';\nimport { getCollection, getProduct } from '@lib/shopify/storefront-data-hooks/src/api/operations-builder';\nimport builderConfig from '@config/builder';\nexport var ProductGrid = function ProductGrid(_ref) {\n  _s();\n\n  var initialProducts = _ref.products,\n      collection = _ref.collection,\n      productsList = _ref.productsList,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? 0 : _ref$offset,\n      _ref$limit = _ref.limit,\n      limit = _ref$limit === void 0 ? 10 : _ref$limit,\n      cardProps = _ref.cardProps,\n      highlightCard = _ref.highlightCard;\n\n  var _useState = useState(initialProducts || []),\n      products = _useState[0],\n      setProducts = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    var getProducts = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var promises;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                setLoading(true);\n                promises = productsList.map(function (entry) {\n                  return entry.product;\n                }).filter(function (handle) {\n                  return typeof handle === 'string';\n                }).map( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(handle) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return getProduct(builderConfig, {\n                              handle: handle\n                            });\n\n                          case 2:\n                            return _context.abrupt(\"return\", _context.sent);\n\n                          case 3:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                _context2.t0 = setProducts;\n                _context2.next = 5;\n                return Promise.all(promises);\n\n              case 5:\n                _context2.t1 = _context2.sent;\n                (0, _context2.t0)(_context2.t1);\n                setLoading(false);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function getProducts() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (productsList && !initialProducts) {\n      getProducts();\n    }\n  }, [productsList, initialProducts]);\n  useEffect(function () {\n    var fetchCollection = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setLoading(true);\n                _context3.next = 3;\n                return getCollection(builderConfig, {\n                  handle: collection\n                });\n\n              case 3:\n                result = _context3.sent;\n                setProducts(result.products);\n                setLoading(false);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function fetchCollection() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    if (typeof collection === 'string' && !initialProducts) {\n      fetchCollection();\n    }\n  }, [collection]);\n\n  if (loading) {\n    return jsx(LoadingDots, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 12\n      }\n    });\n  }\n\n  var ProductComponent = process.env.IS_DEMO ? ProductCardDemo : ProductCard;\n  return jsx(Grid, {\n    gap: 2,\n    width: ['100%', '40%', '24%'],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, products.slice(offset, limit).map(function (product, i) {\n    return jsx(ProductComponent, _objectSpread(_objectSpread({\n      key: String(product.id) + i\n    }, (highlightCard === null || highlightCard === void 0 ? void 0 : highlightCard.index) === i ? highlightCard : cardProps), {}, {\n      product: product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }));\n  }));\n};\n\n_s(ProductGrid, \"WSAxYGc9cQ8KyhNX0hrZdXjUfZs=\");\n\n_c = ProductGrid;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductGrid\");","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/blocks/ProductGrid/ProductGrid.tsx"],"names":["jsx","useEffect","useState","LoadingDots","Grid","ProductCardDemo","ProductCard","getCollection","getProduct","builderConfig","ProductGrid","initialProducts","products","collection","productsList","offset","limit","cardProps","highlightCard","setProducts","loading","setLoading","getProducts","promises","map","entry","product","filter","handle","Promise","all","fetchCollection","result","ProductComponent","process","env","IS_DEMO","slice","i","String","id","index"],"mappings":"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","sourcesContent":["/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from 'theme-ui'\nimport { FC, useEffect, useState } from 'react'\nimport { LoadingDots } from '@components/ui'\nimport { Grid } from '@theme-ui/components'\nimport { ProductCardProps } from '@components/common/ProductCard'\nimport { ProductCardDemo, ProductCard } from '@components/common'\n\nimport {\n  getCollection,\n  getProduct,\n} from '@lib/shopify/storefront-data-hooks/src/api/operations-builder'\nimport builderConfig from '@config/builder'\ninterface HighlightedCardProps extends Omit<ProductCardProps, 'product'> {\n  index: number\n}\n\nexport interface ProductGridProps {\n  products?: ShopifyBuy.Product[]\n  productsList?: Array<{ product: string }>\n  collection?: string | any // ShopifyBuy.Collection\n  offset: number\n  limit: number\n  cardProps: Omit<ProductCardProps, 'product'>\n  highlightCard?: HighlightedCardProps\n}\n\nexport const ProductGrid: FC<ProductGridProps> = ({\n  products: initialProducts,\n  collection,\n  productsList,\n  offset = 0,\n  limit = 10,\n  cardProps,\n  highlightCard,\n}) => {\n  const [products, setProducts] = useState(initialProducts || [])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const getProducts = async () => {\n      setLoading(true)\n      const promises = productsList!\n        .map((entry) => entry.product)\n        .filter((handle: string | undefined) => typeof handle === 'string')\n        .map(\n          async (handle: string) => await getProduct(builderConfig, { handle })\n        )\n      setProducts(await Promise.all(promises))\n      setLoading(false)\n    }\n    if (productsList && !initialProducts) {\n      getProducts()\n    }\n  }, [productsList, initialProducts])\n\n  useEffect(() => {\n    const fetchCollection = async () => {\n      setLoading(true)\n      const result = await getCollection(builderConfig, {\n        handle: collection,\n      })\n      setProducts(result.products)\n      setLoading(false)\n    }\n    if (typeof collection === 'string' && !initialProducts) {\n      fetchCollection()\n    }\n  }, [collection])\n\n  if (loading) {\n    return <LoadingDots />\n  }\n  const ProductComponent: any = process.env.IS_DEMO\n    ? ProductCardDemo\n    : ProductCard\n\n  return (\n    <Grid gap={2} width={['100%', '40%', '24%']}>\n      {products.slice(offset, limit).map((product, i) => (\n        <ProductComponent\n          key={String(product.id) + i}\n          {...(highlightCard?.index === i ? highlightCard : cardProps)}\n          product={product}\n        />\n      ))}\n    </Grid>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}