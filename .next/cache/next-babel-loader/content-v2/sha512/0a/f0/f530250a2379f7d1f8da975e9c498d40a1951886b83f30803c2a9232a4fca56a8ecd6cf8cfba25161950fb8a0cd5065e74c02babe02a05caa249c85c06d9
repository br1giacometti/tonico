{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bruno\\\\Desktop\\\\tienda\\\\nextjs-shopify-master\\\\components\\\\cart\\\\CartSidebarView\\\\CartSidebarView.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\nimport React from 'react';\nimport { Themed, jsx, Text, Card, Grid, Divider, NavLink } from 'theme-ui';\nimport { useEffect, useState } from 'react';\nimport { Bag } from '@components/icons';\nimport { useCart, useCheckoutUrl } from '@lib/shopify/storefront-data-hooks';\nimport CartItem from '../CartItem';\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport env from '@config/env';\n\nconst CartSidebarView = () => {\n  var _cart$lineItems;\n\n  const checkoutUrl = useCheckoutUrl();\n  const cart = useCart();\n  const subTotal = cart === null || cart === void 0 ? void 0 : cart.subtotalPrice;\n  const total = ' - ';\n  const items = (_cart$lineItems = cart === null || cart === void 0 ? void 0 : cart.lineItems) !== null && _cart$lineItems !== void 0 ? _cart$lineItems : [];\n  const isEmpty = items.length === 0;\n  const {\n    0: cartUpsell,\n    1: setCartUpsell\n  } = useState();\n  useEffect(() => {\n    async function fetchContent() {\n      const items = (cart === null || cart === void 0 ? void 0 : cart.lineItems) || [];\n      const cartUpsellContent = await builder.get('cart-upsell-sidebar', {\n        cachebust: env.isDev,\n        userAttributes: {\n          itemInCart: items.map(item => item.variant.product.handle)\n        }\n      }).toPromise();\n      setCartUpsell(cartUpsellContent);\n    }\n\n    fetchContent();\n  }, [cart === null || cart === void 0 ? void 0 : cart.lineItems]);\n  return jsx(Themed.div, {\n    sx: _objectSpread({\n      height: '100%',\n      overflow: 'auto',\n      paddingBottom: 5,\n      bg: 'text',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      px: 2,\n      color: 'background'\n    }, isEmpty && {\n      justifyContent: 'center'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, isEmpty ? jsx(React.Fragment, null, jsx(Bag, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }), \"Your cart is empty\", jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"Biscuit oat cake wafer icing ice cream tiramisu pudding cupcake.\")) : jsx(React.Fragment, null, items.map(item => {\n    var _item$variant, _item$variant$priceV;\n\n    return jsx(CartItem, {\n      key: item.id,\n      item: item // todo update types\n      ,\n      currencyCode: ((_item$variant = item.variant) === null || _item$variant === void 0 ? void 0 : (_item$variant$priceV = _item$variant.priceV2) === null || _item$variant$priceV === void 0 ? void 0 : _item$variant$priceV.currencyCode) || 'USD',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    });\n  }), jsx(Card, {\n    sx: {\n      marginLeft: 'auto',\n      minWidth: '10rem',\n      paddingLeft: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, jsx(Grid, {\n    gap: 1,\n    columns: 2,\n    sx: {\n      my: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, \"Subtotal:\"), jsx(Text, {\n    sx: {\n      marginLeft: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, subTotal), jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, \"Shipping:\"), jsx(Text, {\n    sx: {\n      marginLeft: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, \" - \"), jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, \"Tax: \"), jsx(Text, {\n    sx: {\n      marginLeft: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, \" - \")), jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), jsx(Grid, {\n    gap: 1,\n    columns: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, jsx(Text, {\n    variant: \"bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, \"Estimated Total:\"), jsx(Text, {\n    variant: \"bold\",\n    sx: {\n      marginLeft: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, total))), jsx(BuilderComponent, {\n    content: cartUpsell,\n    model: \"cart-upsell-sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), checkoutUrl && jsx(NavLink, {\n    variant: \"nav\",\n    sx: {\n      width: '100%',\n      m: 2,\n      p: 12,\n      textAlign: 'center'\n    },\n    href: checkoutUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Proceed to Checkout\")));\n};\n\nexport default CartSidebarView;","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/components/cart/CartSidebarView/CartSidebarView.tsx"],"names":["React","Themed","jsx","Text","Card","Grid","Divider","NavLink","useEffect","useState","Bag","useCart","useCheckoutUrl","CartItem","BuilderComponent","builder","env","CartSidebarView","checkoutUrl","cart","subTotal","subtotalPrice","total","items","lineItems","isEmpty","length","cartUpsell","setCartUpsell","fetchContent","cartUpsellContent","get","cachebust","isDev","userAttributes","itemInCart","map","item","variant","product","handle","toPromise","height","overflow","paddingBottom","bg","display","flexDirection","alignItems","px","color","justifyContent","id","priceV2","currencyCode","marginLeft","minWidth","paddingLeft","my","width","m","p","textAlign"],"mappings":";;;;;;;;AAAA;;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,OAAxC,EAAiDC,OAAjD,QAAgE,UAAhE;AACA,SAAaC,SAAb,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,GAAT,QAAoB,mBAApB;AACA,SAASC,OAAT,EAAkBC,cAAlB,QAAwC,oCAAxC;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,SAASC,gBAAT,EAA2BC,OAA3B,QAA0C,mBAA1C;AACA,OAAOC,GAAP,MAAgB,aAAhB;;AAEA,MAAMC,eAAmB,GAAG,MAAM;AAAA;;AAChC,QAAMC,WAAW,GAAGN,cAAc,EAAlC;AACA,QAAMO,IAAI,GAAGR,OAAO,EAApB;AACA,QAAMS,QAAQ,GAAGD,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEE,aAAvB;AACA,QAAMC,KAAK,GAAG,KAAd;AAEA,QAAMC,KAAK,sBAAGJ,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEK,SAAT,6DAAsB,EAAjC;AACA,QAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,KAAiB,CAAjC;AACA,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8BnB,QAAQ,EAA5C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeqB,YAAf,GAA8B;AAC5B,YAAMN,KAAK,GAAG,CAAAJ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEK,SAAN,KAAmB,EAAjC;AACA,YAAMM,iBAAiB,GAAG,MAAMf,OAAO,CACpCgB,GAD6B,CACzB,qBADyB,EACF;AAC1BC,QAAAA,SAAS,EAAEhB,GAAG,CAACiB,KADW;AAE1BC,QAAAA,cAAc,EAAE;AACdC,UAAAA,UAAU,EAAEZ,KAAK,CAACa,GAAN,CAAWC,IAAD,IAAeA,IAAI,CAACC,OAAL,CAAaC,OAAb,CAAqBC,MAA9C;AADE;AAFU,OADE,EAO7BC,SAP6B,EAAhC;AAQAb,MAAAA,aAAa,CAACE,iBAAD,CAAb;AACD;;AACDD,IAAAA,YAAY;AACb,GAdQ,EAcN,CAACV,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEK,SAAP,CAdM,CAAT;AAgBA,SACE,IAAC,MAAD,CAAQ,GAAR;AACE,IAAA,EAAE;AACAkB,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,MAFV;AAGAC,MAAAA,aAAa,EAAE,CAHf;AAIAC,MAAAA,EAAE,EAAE,MAJJ;AAKAC,MAAAA,OAAO,EAAE,MALT;AAMAC,MAAAA,aAAa,EAAE,QANf;AAOAC,MAAAA,UAAU,EAAE,QAPZ;AAQAC,MAAAA,EAAE,EAAE,CARJ;AASAC,MAAAA,KAAK,EAAE;AATP,OAUIzB,OAAO,IAAI;AAAE0B,MAAAA,cAAc,EAAE;AAAlB,KAVf,CADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAcG1B,OAAO,GACN,0BACE,IAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,wBAGE,IAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wEAHF,CADM,GASN,0BACGF,KAAK,CAACa,GAAN,CAAWC,IAAD;AAAA;;AAAA,WACT,IAAC,QAAD;AACE,MAAA,GAAG,EAAEA,IAAI,CAACe,EADZ;AAEE,MAAA,IAAI,EAAEf,IAFR,CAGE;AAHF;AAIE,MAAA,YAAY,EAAE,kBAAAA,IAAI,CAACC,OAAL,wFAAce,OAAd,8EAAuBC,YAAvB,KAAuC,KAJvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADS;AAAA,GAAV,CADH,EASE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAE;AAAEC,MAAAA,UAAU,EAAE,MAAd;AAAsBC,MAAAA,QAAQ,EAAE,OAAhC;AAAyCC,MAAAA,WAAW,EAAE;AAAtD,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,IAAD;AAAM,IAAA,GAAG,EAAE,CAAX;AAAc,IAAA,OAAO,EAAE,CAAvB;AAA0B,IAAA,EAAE,EAAE;AAAEC,MAAAA,EAAE,EAAE;AAAN,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAE;AAAEH,MAAAA,UAAU,EAAE;AAAd,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCnC,QAAnC,CAFF,EAGE,IAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,EAIE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAE;AAAEmC,MAAAA,UAAU,EAAE;AAAd,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJF,EAKE,IAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,EAME,IAAC,IAAD;AAAM,IAAA,EAAE,EAAE;AAAEA,MAAAA,UAAU,EAAE;AAAd,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WANF,CADF,EAUE,IAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAWE,IAAC,IAAD;AAAM,IAAA,GAAG,EAAE,CAAX;AAAc,IAAA,OAAO,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,IAAD;AAAM,IAAA,OAAO,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE,IAAC,IAAD;AAAM,IAAA,OAAO,EAAC,MAAd;AAAqB,IAAA,EAAE,EAAE;AAAEA,MAAAA,UAAU,EAAE;AAAd,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjC,KADH,CAFF,CAXF,CATF,EA2BE,IAAC,gBAAD;AAAkB,IAAA,OAAO,EAAEK,UAA3B;AAAuC,IAAA,KAAK,EAAC,qBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3BF,EA4BGT,WAAW,IACV,IAAC,OAAD;AACE,IAAA,OAAO,EAAC,KADV;AAEE,IAAA,EAAE,EAAE;AAAEyC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,CAAC,EAAE,CAApB;AAAuBC,MAAAA,CAAC,EAAE,EAA1B;AAA8BC,MAAAA,SAAS,EAAE;AAAzC,KAFN;AAGE,IAAA,IAAI,EAAE5C,WAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BA7BJ,CAvBJ,CADF;AAiED,CA3FD;;AA6FA,eAAeD,eAAf","sourcesContent":["/** @jsxRuntime classic */\n/** @jsx jsx */\nimport React from 'react'\nimport { Themed, jsx, Text, Card, Grid, Divider, NavLink } from 'theme-ui'\nimport { FC, useEffect, useState } from 'react'\nimport { Bag } from '@components/icons'\nimport { useCart, useCheckoutUrl } from '@lib/shopify/storefront-data-hooks'\nimport CartItem from '../CartItem'\nimport { BuilderComponent, builder } from '@builder.io/react'\nimport env from '@config/env'\n\nconst CartSidebarView: FC = () => {\n  const checkoutUrl = useCheckoutUrl()\n  const cart = useCart()\n  const subTotal = cart?.subtotalPrice\n  const total = ' - '\n\n  const items = cart?.lineItems ?? []\n  const isEmpty = items.length === 0\n  const [cartUpsell, setCartUpsell] = useState()\n\n  useEffect(() => {\n    async function fetchContent() {\n      const items = cart?.lineItems || []\n      const cartUpsellContent = await builder\n        .get('cart-upsell-sidebar', {\n          cachebust: env.isDev,\n          userAttributes: {\n            itemInCart: items.map((item: any) => item.variant.product.handle),\n          } as any,\n        })\n        .toPromise()\n      setCartUpsell(cartUpsellContent)\n    }\n    fetchContent()\n  }, [cart?.lineItems])\n\n  return (\n    <Themed.div\n      sx={{\n        height: '100%',\n        overflow: 'auto',\n        paddingBottom: 5,\n        bg: 'text',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        px: 2,\n        color: 'background',\n        ...(isEmpty && { justifyContent: 'center' }),\n      }}\n    >\n      {isEmpty ? (\n        <>\n          <Bag />\n          Your cart is empty\n          <Text>\n            Biscuit oat cake wafer icing ice cream tiramisu pudding cupcake.\n          </Text>\n        </>\n      ) : (\n        <>\n          {items.map((item: any) => (\n            <CartItem\n              key={item.id}\n              item={item}\n              // todo update types\n              currencyCode={item.variant?.priceV2?.currencyCode || 'USD'}\n            />\n          ))}\n          <Card sx={{ marginLeft: 'auto', minWidth: '10rem', paddingLeft: 5 }}>\n            <Grid gap={1} columns={2} sx={{ my: 3 }}>\n              <Text>Subtotal:</Text>\n              <Text sx={{ marginLeft: 'auto' }}>{subTotal}</Text>\n              <Text>Shipping:</Text>\n              <Text sx={{ marginLeft: 'auto' }}> - </Text>\n              <Text>Tax: </Text>\n              <Text sx={{ marginLeft: 'auto' }}> - </Text>\n            </Grid>\n\n            <Divider />\n            <Grid gap={1} columns={2}>\n              <Text variant=\"bold\">Estimated Total:</Text>\n              <Text variant=\"bold\" sx={{ marginLeft: 'auto' }}>\n                {total}\n              </Text>\n            </Grid>\n          </Card>\n          <BuilderComponent content={cartUpsell} model=\"cart-upsell-sidebar\" />\n          {checkoutUrl && (\n            <NavLink\n              variant=\"nav\"\n              sx={{ width: '100%', m: 2, p: 12, textAlign: 'center' }}\n              href={checkoutUrl!}\n            >\n              Proceed to Checkout\n            </NavLink>\n          )}\n        </>\n      )}\n    </Themed.div>\n  )\n}\n\nexport default CartSidebarView\n"]},"metadata":{},"sourceType":"module"}