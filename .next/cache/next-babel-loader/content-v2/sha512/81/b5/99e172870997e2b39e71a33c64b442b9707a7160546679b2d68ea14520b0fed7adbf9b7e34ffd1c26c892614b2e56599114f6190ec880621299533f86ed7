{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Bruno\\\\Desktop\\\\tienda\\\\nextjs-shopify-master\\\\blocks\\\\ProductView\\\\ProductLoader.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\nimport React, { useState, useEffect } from 'react';\nimport { jsx } from 'theme-ui';\nimport { getProduct } from '@lib/shopify/storefront-data-hooks/src/api/operations-builder';\nimport builderConfig from '@config/builder';\nimport { LoadingDots } from '@components/ui';\n\nvar ProductLoader = function ProductLoader(_ref) {\n  _s();\n\n  var initialProduct = _ref.product,\n      children = _ref.children;\n\n  var _useState = useState(initialProduct),\n      product = _useState[0],\n      setProduct = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    return setProduct(initialProduct);\n  }, [initialProduct]);\n  useEffect(function () {\n    var fetchProduct = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setLoading(true);\n                _context.next = 3;\n                return getProduct(builderConfig, {\n                  handle: String(product)\n                });\n\n              case 3:\n                result = _context.sent;\n                setProduct(result);\n                setLoading(false);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchProduct() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (typeof product === 'string') {\n      fetchProduct();\n    }\n  }, [product]);\n\n  if (!product || typeof product === 'string' || loading) {\n    return jsx(LoadingDots, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return children(product);\n};\n\n_s(ProductLoader, \"LXT9RqiAI8obvCdxTe81ZMeIZIQ=\");\n\n_c = ProductLoader;\nexport default ProductLoader;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductLoader\");","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/blocks/ProductView/ProductLoader.tsx"],"names":["React","useState","useEffect","jsx","getProduct","builderConfig","LoadingDots","ProductLoader","initialProduct","product","children","setProduct","loading","setLoading","fetchProduct","handle","String","result"],"mappings":";;;;;;;AAAA;;AACA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,GAAT,QAAoB,UAApB;AACA,SAASC,UAAT,QAA2B,+DAA3B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,WAAT,QAA4B,gBAA5B;;AAQA,IAAMC,aAA8B,GAAG,SAAjCA,aAAiC,OAGjC;AAAA;;AAAA,MAFKC,cAEL,QAFJC,OAEI;AAAA,MADJC,QACI,QADJA,QACI;;AAAA,kBAC0BT,QAAQ,CAACO,cAAD,CADlC;AAAA,MACGC,OADH;AAAA,MACYE,UADZ;;AAAA,mBAE0BV,QAAQ,CAAC,KAAD,CAFlC;AAAA,MAEGW,OAFH;AAAA,MAEYC,UAFZ;;AAIJX,EAAAA,SAAS,CAAC;AAAA,WAAMS,UAAU,CAACH,cAAD,CAAhB;AAAA,GAAD,EAAmC,CAACA,cAAD,CAAnC,CAAT;AAEAN,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMY,YAAY;AAAA,2EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBD,gBAAAA,UAAU,CAAC,IAAD,CAAV;AADmB;AAAA,uBAEET,UAAU,CAACC,aAAD,EAAgB;AAC7CU,kBAAAA,MAAM,EAAEC,MAAM,CAACP,OAAD;AAD+B,iBAAhB,CAFZ;;AAAA;AAEbQ,gBAAAA,MAFa;AAKnBN,gBAAAA,UAAU,CAACM,MAAD,CAAV;AACAJ,gBAAAA,UAAU,CAAC,KAAD,CAAV;;AANmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAZC,YAAY;AAAA;AAAA;AAAA,OAAlB;;AAQA,QAAI,OAAOL,OAAP,KAAmB,QAAvB,EAAiC;AAC/BK,MAAAA,YAAY;AACb;AACF,GAZQ,EAYN,CAACL,OAAD,CAZM,CAAT;;AAcA,MAAI,CAACA,OAAD,IAAY,OAAOA,OAAP,KAAmB,QAA/B,IAA2CG,OAA/C,EAAwD;AACtD,WAAO,IAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,SAAOF,QAAQ,CAACD,OAAD,CAAf;AACD,CA3BD;;GAAMF,a;;KAAAA,a;AA6BN,eAAeA,aAAf","sourcesContent":["/** @jsxRuntime classic */\n/** @jsx jsx */\nimport React, { useState, useEffect } from 'react'\nimport { jsx } from 'theme-ui'\nimport { getProduct } from '@lib/shopify/storefront-data-hooks/src/api/operations-builder'\nimport builderConfig from '@config/builder'\nimport { LoadingDots } from '@components/ui'\n\ninterface Props {\n  className?: string\n  children: (product: any) => React.ReactElement\n  product: string | ShopifyBuy.Product\n}\n\nconst ProductLoader: React.FC<Props> = ({\n  product: initialProduct,\n  children,\n}) => {\n  const [product, setProduct] = useState(initialProduct)\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => setProduct(initialProduct), [initialProduct])\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      setLoading(true)\n      const result = await getProduct(builderConfig, {\n        handle: String(product),\n      })\n      setProduct(result)\n      setLoading(false)\n    }\n    if (typeof product === 'string') {\n      fetchProduct()\n    }\n  }, [product])\n\n  if (!product || typeof product === 'string' || loading) {\n    return <LoadingDots />\n  }\n  return children(product)\n}\n\nexport default ProductLoader\n"]},"metadata":{},"sourceType":"module"}