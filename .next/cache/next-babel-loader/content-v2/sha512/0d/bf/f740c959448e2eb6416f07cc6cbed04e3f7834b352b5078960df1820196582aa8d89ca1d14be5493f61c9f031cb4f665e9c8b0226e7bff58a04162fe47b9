{"ast":null,"code":"import _defineProperty from \"C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Bruno\\\\Desktop\\\\tienda\\\\nextjs-shopify-master\\\\pages\\\\product\\\\[handle].tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from 'next/router';\nimport { Layout } from '@components/common';\nimport { BuilderComponent, Builder, builder } from '@builder.io/react';\nimport '../../blocks/ProductView/ProductView.builder';\nimport builderConfig from '@config/builder';\nimport DefaultErrorPage from 'next/error';\nimport Head from 'next/head';\nimport { useThemeUI } from 'theme-ui';\nbuilder.init(builderConfig.apiKey);\nBuilder.isStatic = true;\nvar builderModel = 'product-page';\nexport var __N_SSG = true;\nexport default function Handle(_ref) {\n  _s();\n\n  var product = _ref.product,\n      page = _ref.page;\n  Builder.isStatic = true;\n  var router = useRouter();\n  var isLive = !Builder.isEditing && !Builder.isPreviewing;\n\n  var _useThemeUI = useThemeUI(),\n      theme = _useThemeUI.theme; // This includes setting the noindex header because static files always return a status 200 but the rendered not found page page should obviously not be indexed\n\n\n  if (!product && isLive) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"robots\",\n          content: \"noindex\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DefaultErrorPage, {\n        statusCode: 404\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return router.isFallback && isLive ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this) // TODO (BC) Add Skeleton Views\n  :\n  /*#__PURE__*/\n  _jsxDEV(BuilderComponent, _objectSpread({\n    isStatic: true,\n    model: builderModel,\n    data: {\n      product: product,\n      theme: theme\n    }\n  }, page && {\n    content: page\n  }), product.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Handle, \"e43mLmUDLeffLESFakPeSMBhNE8=\", false, function () {\n  return [useRouter, useThemeUI];\n});\n\n_c = Handle;\nHandle.Layout = Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Handle\");","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/pages/product/[handle].tsx"],"names":["useRouter","Layout","BuilderComponent","Builder","builder","builderConfig","DefaultErrorPage","Head","useThemeUI","init","apiKey","isStatic","builderModel","Handle","product","page","router","isLive","isEditing","isPreviewing","theme","isFallback","content","id"],"mappings":";;;;;;;;;;;AAKA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,gBAAT,EAA2BC,OAA3B,EAAoCC,OAApC,QAAmD,mBAAnD;AAEA,OAAO,8CAAP;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAKA,OAAOC,gBAAP,MAA6B,YAA7B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,UAA3B;AAEAJ,OAAO,CAACK,IAAR,CAAaJ,aAAa,CAACK,MAA3B;AACAP,OAAO,CAACQ,QAAR,GAAmB,IAAnB;AAEA,IAAMC,YAAY,GAAG,cAArB;;AAgCA,eAAe,SAASC,MAAT,OAGoC;AAAA;;AAAA,MAFjDC,OAEiD,QAFjDA,OAEiD;AAAA,MADjDC,IACiD,QADjDA,IACiD;AACjDZ,EAAAA,OAAO,CAACQ,QAAR,GAAmB,IAAnB;AACA,MAAMK,MAAM,GAAGhB,SAAS,EAAxB;AACA,MAAMiB,MAAM,GAAG,CAACd,OAAO,CAACe,SAAT,IAAsB,CAACf,OAAO,CAACgB,YAA9C;;AAHiD,oBAI/BX,UAAU,EAJqB;AAAA,MAIzCY,KAJyC,eAIzCA,KAJyC,EAKjD;;;AACA,MAAI,CAACN,OAAD,IAAYG,MAAhB,EAAwB;AACtB,wBACE;AAAA,8BACE,QAAC,IAAD;AAAA,gCACE;AAAM,UAAA,IAAI,EAAC,QAAX;AAAoB,UAAA,OAAO,EAAC;AAA5B;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAM,UAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAKE,QAAC,gBAAD;AAAkB,QAAA,UAAU,EAAE;AAA9B;AAAA;AAAA;AAAA;AAAA,cALF;AAAA,oBADF;AASD;;AAED,SAAOD,MAAM,CAACK,UAAP,IAAqBJ,MAArB,gBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADK,CACe;AADf;AAAA;AAGL,UAAC,gBAAD;AACE,IAAA,QAAQ,MADV;AAGE,IAAA,KAAK,EAAEL,YAHT;AAIE,IAAA,IAAI,EAAE;AAAEE,MAAAA,OAAO,EAAPA,OAAF;AAAWM,MAAAA,KAAK,EAALA;AAAX;AAJR,KAKOL,IAAI,IAAI;AAAEO,IAAAA,OAAO,EAAEP;AAAX,GALf,GAEOD,OAAO,CAAES,EAFhB;AAAA;AAAA;AAAA;AAAA,UAHF;AAWD;;GAhCuBV,M;UAKPb,S,EAEGQ,U;;;KAPIK,M;AAkCxBA,MAAM,CAACZ,MAAP,GAAgBA,MAAhB","sourcesContent":["import type {\n  GetStaticPathsContext,\n  GetStaticPropsContext,\n  InferGetStaticPropsType,\n} from 'next'\nimport { useRouter } from 'next/router'\nimport { Layout } from '@components/common'\nimport { BuilderComponent, Builder, builder } from '@builder.io/react'\nimport { resolveBuilderContent } from '@lib/resolve-builder-content'\nimport '../../blocks/ProductView/ProductView.builder'\nimport builderConfig from '@config/builder'\nimport {\n  getAllProductPaths,\n  getProduct,\n} from '@lib/shopify/storefront-data-hooks/src/api/operations-builder'\nimport DefaultErrorPage from 'next/error'\nimport Head from 'next/head'\nimport { useThemeUI } from 'theme-ui'\nimport { getLayoutProps } from '@lib/get-layout-props'\nbuilder.init(builderConfig.apiKey!)\nBuilder.isStatic = true\n\nconst builderModel = 'product-page'\n\nexport async function getStaticProps({\n  params,\n  locale,\n}: GetStaticPropsContext<{ handle: string }>) {\n  const product = await getProduct(builderConfig, {\n    handle: params?.handle,\n  })\n\n  const page = await resolveBuilderContent(builderModel, {\n    productHandle: params?.handle,\n    locale,\n  })\n\n  return {\n    props: {\n      page: page || null,\n      product: product || null,\n      ...(await getLayoutProps()),\n    },\n  }\n}\n\nexport async function getStaticPaths({ locales }: GetStaticPathsContext) {\n  const paths = await getAllProductPaths(builderConfig)\n  return {\n    paths: paths.map((path) => `/product/${path}`),\n    fallback: 'blocking',\n  }\n}\n\nexport default function Handle({\n  product,\n  page,\n}: InferGetStaticPropsType<typeof getStaticProps>) {\n  Builder.isStatic = true\n  const router = useRouter()\n  const isLive = !Builder.isEditing && !Builder.isPreviewing\n  const { theme } = useThemeUI()\n  // This includes setting the noindex header because static files always return a status 200 but the rendered not found page page should obviously not be indexed\n  if (!product && isLive) {\n    return (\n      <>\n        <Head>\n          <meta name=\"robots\" content=\"noindex\" />\n          <meta name=\"title\"></meta>\n        </Head>\n        <DefaultErrorPage statusCode={404} />\n      </>\n    )\n  }\n\n  return router.isFallback && isLive ? (\n    <h1>Loading...</h1> // TODO (BC) Add Skeleton Views\n  ) : (\n    <BuilderComponent\n      isStatic\n      key={product!.id}\n      model={builderModel}\n      data={{ product, theme }}\n      {...(page && { content: page })}\n    />\n  )\n}\n\nHandle.Layout = Layout\n"]},"metadata":{},"sourceType":"module"}