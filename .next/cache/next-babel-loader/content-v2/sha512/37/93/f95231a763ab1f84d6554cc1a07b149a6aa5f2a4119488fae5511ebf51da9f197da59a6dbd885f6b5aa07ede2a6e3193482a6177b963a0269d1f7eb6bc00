{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Bruno\\\\Desktop\\\\tienda\\\\nextjs-shopify-master\\\\pages\\\\product\\\\[handle].tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from 'next/router';\nimport { Layout } from '@components/common';\nimport { BuilderComponent, Builder, builder } from '@builder.io/react';\nimport { resolveBuilderContent } from '@lib/resolve-builder-content';\nimport '../../blocks/ProductView/ProductView.builder';\nimport builderConfig from '@config/builder';\nimport { getAllProductPaths, getProduct } from '@lib/shopify/storefront-data-hooks/src/api/operations-builder';\nimport DefaultErrorPage from 'next/error';\nimport Head from 'next/head';\nimport { useThemeUI } from 'theme-ui';\nimport { getLayoutProps } from '@lib/get-layout-props';\nbuilder.init(builderConfig.apiKey);\nBuilder.isStatic = true;\nconst builderModel = 'product-page';\nexport async function getStaticProps({\n  params,\n  locale\n}) {\n  const product = await getProduct(builderConfig, {\n    handle: params === null || params === void 0 ? void 0 : params.handle\n  });\n  const page = await resolveBuilderContent(builderModel, {\n    productHandle: params === null || params === void 0 ? void 0 : params.handle,\n    locale\n  });\n  return {\n    props: _objectSpread({\n      page: page || null,\n      product: product || null\n    }, await getLayoutProps())\n  };\n}\nexport async function getStaticPaths({\n  locales\n}) {\n  const paths = await getAllProductPaths(builderConfig);\n  return {\n    paths: paths.map(path => `/product/${path}`),\n    fallback: 'blocking'\n  };\n}\nexport default function Handle({\n  product,\n  page\n}) {\n  Builder.isStatic = true;\n  const router = useRouter();\n  const isLive = !Builder.isEditing && !Builder.isPreviewing;\n  const {\n    theme\n  } = useThemeUI(); // This includes setting the noindex header because static files always return a status 200 but the rendered not found page page should obviously not be indexed\n\n  if (!product && isLive) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"robots\",\n          content: \"noindex\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DefaultErrorPage, {\n        statusCode: 404\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return router.isFallback && isLive ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this) // TODO (BC) Add Skeleton Views\n  :\n  /*#__PURE__*/\n  _jsxDEV(BuilderComponent, _objectSpread({\n    isStatic: true,\n    model: builderModel,\n    data: {\n      product,\n      theme\n    }\n  }, page && {\n    content: page\n  }), product.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\nHandle.Layout = Layout;","map":{"version":3,"sources":["C:/Users/Bruno/Desktop/tienda/nextjs-shopify-master/pages/product/[handle].tsx"],"names":["useRouter","Layout","BuilderComponent","Builder","builder","resolveBuilderContent","builderConfig","getAllProductPaths","getProduct","DefaultErrorPage","Head","useThemeUI","getLayoutProps","init","apiKey","isStatic","builderModel","getStaticProps","params","locale","product","handle","page","productHandle","props","getStaticPaths","locales","paths","map","path","fallback","Handle","router","isLive","isEditing","isPreviewing","theme","isFallback","content","id"],"mappings":"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","sourcesContent":["import type {\n  GetStaticPathsContext,\n  GetStaticPropsContext,\n  InferGetStaticPropsType,\n} from 'next'\nimport { useRouter } from 'next/router'\nimport { Layout } from '@components/common'\nimport { BuilderComponent, Builder, builder } from '@builder.io/react'\nimport { resolveBuilderContent } from '@lib/resolve-builder-content'\nimport '../../blocks/ProductView/ProductView.builder'\nimport builderConfig from '@config/builder'\nimport {\n  getAllProductPaths,\n  getProduct,\n} from '@lib/shopify/storefront-data-hooks/src/api/operations-builder'\nimport DefaultErrorPage from 'next/error'\nimport Head from 'next/head'\nimport { useThemeUI } from 'theme-ui'\nimport { getLayoutProps } from '@lib/get-layout-props'\nbuilder.init(builderConfig.apiKey!)\nBuilder.isStatic = true\n\nconst builderModel = 'product-page'\n\nexport async function getStaticProps({\n  params,\n  locale,\n}: GetStaticPropsContext<{ handle: string }>) {\n  const product = await getProduct(builderConfig, {\n    handle: params?.handle,\n  })\n\n  const page = await resolveBuilderContent(builderModel, {\n    productHandle: params?.handle,\n    locale,\n  })\n\n  return {\n    props: {\n      page: page || null,\n      product: product || null,\n      ...(await getLayoutProps()),\n    },\n  }\n}\n\nexport async function getStaticPaths({ locales }: GetStaticPathsContext) {\n  const paths = await getAllProductPaths(builderConfig)\n  return {\n    paths: paths.map((path) => `/product/${path}`),\n    fallback: 'blocking',\n  }\n}\n\nexport default function Handle({\n  product,\n  page,\n}: InferGetStaticPropsType<typeof getStaticProps>) {\n  Builder.isStatic = true\n  const router = useRouter()\n  const isLive = !Builder.isEditing && !Builder.isPreviewing\n  const { theme } = useThemeUI()\n  // This includes setting the noindex header because static files always return a status 200 but the rendered not found page page should obviously not be indexed\n  if (!product && isLive) {\n    return (\n      <>\n        <Head>\n          <meta name=\"robots\" content=\"noindex\" />\n          <meta name=\"title\"></meta>\n        </Head>\n        <DefaultErrorPage statusCode={404} />\n      </>\n    )\n  }\n\n  return router.isFallback && isLive ? (\n    <h1>Loading...</h1> // TODO (BC) Add Skeleton Views\n  ) : (\n    <BuilderComponent\n      isStatic\n      key={product!.id}\n      model={builderModel}\n      data={{ product, theme }}\n      {...(page && { content: page })}\n    />\n  )\n}\n\nHandle.Layout = Layout\n"]},"metadata":{},"sourceType":"module"}